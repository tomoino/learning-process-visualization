version: '3'

env:
  SERVICE_NAME: lpvis

tasks:
  build:
    desc: build image
    dir: '{{.USER_WORKING_DIR}}/docker'
    cmd: docker-compose build
      
  up:
    desc: up containers
    dir: '{{.USER_WORKING_DIR}}/docker'
    cmd: docker-compose up -d

  jlab:
    desc: up container
    dir: '{{.USER_WORKING_DIR}}/docker'
    cmd: docker-compose up -d jlab
    
  down:
    desc: down containers
    dir: '{{.USER_WORKING_DIR}}/docker'
    cmd: docker-compose down

  exec:
    desc: enter container
    cmd: docker exec -it $SERVICE_NAME bash

  test:
    desc: test
    cmd: docker exec -it $SERVICE_NAME pytest -svv {{.CLI_ARGS}}